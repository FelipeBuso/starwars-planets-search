(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a.p+"static/media/star-wars-logo.0202a998.png"},function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(5),c=a.n(l),o=(a(12),a(2)),u=a(3),i=a(1),m=Object(n.createContext)();a(13);function s(){return r.a.createElement("tr",{className:"header-table-section"},r.a.createElement("th",null,"name"),r.a.createElement("th",null,"rotation_period"),r.a.createElement("th",null,"orbital_period"),r.a.createElement("th",null,"diameter"),r.a.createElement("th",null,"climate"),r.a.createElement("th",null,"gravity"),r.a.createElement("th",null,"terrain"),r.a.createElement("th",null,"surface_water"),r.a.createElement("th",null,"population"),r.a.createElement("th",null,"films"),r.a.createElement("th",null,"created"),r.a.createElement("th",null,"edited"),r.a.createElement("th",null,"url"))}a(14);function f(e){var t=e.planet;return r.a.createElement("tr",{className:"row-section"},r.a.createElement("td",{"data-testid":"planet-name"},t.name),r.a.createElement("td",null,t.rotation_period),r.a.createElement("td",null,t.orbital_period),r.a.createElement("td",null,t.diameter),r.a.createElement("td",null,t.climate),r.a.createElement("td",null,t.gravity),r.a.createElement("td",null,t.terrain),r.a.createElement("td",null,t.surface_water),r.a.createElement("td",null,t.population),r.a.createElement("td",null,t.films),r.a.createElement("td",null,t.created),r.a.createElement("td",null,t.edited),r.a.createElement("td",null,t.url))}a(15);var d=a(6),p=a.n(d);function E(e){var t=e.filters;return r.a.createElement("div",{className:"filter-top-section"},r.a.createElement("div",{className:"filter-name-section"},r.a.createElement("label",{htmlFor:"name-filter"},"Filter by name:",r.a.createElement("input",{type:"text","data-testid":"name-filter",onChange:function(e){return t.handlerChangeName(e)},value:t.filterName}))),r.a.createElement("div",{className:"filter-order-section"},r.a.createElement("label",{htmlFor:"column-sort"},"Order by :",r.a.createElement("select",{"data-testid":"column-sort",name:"column",onChange:function(e){return t.saveOrderFilter(e)}},r.a.createElement("option",{value:"name"},"name"),r.a.createElement("option",{value:"rotation_period"},"rotation_period"),r.a.createElement("option",{value:"orbital_period"},"orbital_period"),r.a.createElement("option",{value:"diameter"},"diameter"),r.a.createElement("option",{value:"surface_water"},"surface_water"),r.a.createElement("option",{value:"population"},"population"))),r.a.createElement("label",{htmlFor:"column-sort-input-asc"},"ASC",r.a.createElement("input",{type:"radio",name:"sort","data-testid":"column-sort-input-asc",value:"ASC",onChange:function(e){return t.saveOrderFilter(e)}})),r.a.createElement("label",{htmlFor:"column-sort-input-desc"},"DESC",r.a.createElement("input",{type:"radio",name:"sort","data-testid":"column-sort-input-desc",value:"DESC",onChange:function(e){return t.saveOrderFilter(e)}})),r.a.createElement("button",{type:"button","data-testid":"column-sort-button",onClick:function(){return t.startOrder()}},"Sort")),r.a.createElement("div",{className:"logo-section"},r.a.createElement("img",{className:"logo",src:p.a,alt:"logo star wars"}),r.a.createElement("span",{className:"logo-planets"},"PLANETS")))}a(16);function v(){var e=Object(n.useContext)(m),t=e.planets,a=e.savePlanets,l=e.isLoading,c=e.changeLoading,d=e.filters,p=e.setFilters,v=e.planetsToFilter,b=e.saveFilteredPlanets,h=e.addFilterByNumericValue,O=e.addFilterByOrder,j=e.removeFilterByNumericValue,g=Object(n.useState)(""),y=Object(i.a)(g,2),F=y[0],N=y[1];Object(n.useEffect)((function(){var e;c(),e=a,fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()})).then((function(t){return e(t.results)})).catch((function(e){return new Error(e)}))}),[]);var C=Object(n.useState)({column:"population",comparison:"maior que",value:""}),w=Object(i.a)(C,2),S=w[0],B=w[1],_=Object(n.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),k=Object(i.a)(_,2),x=k[0],V=k[1];function q(){h(S);var e=function(e,t){var a=t.comparison,n=t.column,r=t.value;switch(a){case"maior que":return e.filter((function(e){return parseFloat(e[n])>parseFloat(r)}));case"menor que":return e.filter((function(e){return parseFloat(e[n])<parseFloat(r)}));case"igual a":return e.filter((function(e){return parseFloat(e[n])===parseFloat(r)}))}}(t,S);b(e),function(){var e=d.filterByNumericValues.map((function(e){return e.column})),t=[];e.forEach((function(e){t=x.filter((function(t){return t!==e}))})),V(t)}()}function L(e){var t=e.target,a=t.name,n=t.value;B((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(o.a)({},a,n))}))}var A=Object(n.useState)(null),P=Object(i.a)(A,2),T=P[0],D=P[1];function J(){return r.a.createElement("div",{className:"filters-applied-section"},d.filterByNumericValues.map((function(e,t){return r.a.createElement("div",{"data-testid":"filter",key:t},r.a.createElement("span",null,e.column),r.a.createElement("span",null,e.comparison),r.a.createElement("span",null,e.value),r.a.createElement("button",{type:"button",onClick:function(){D(t)}},"X"))})))}Object(n.useEffect)((function(){j(T)}),[T]),Object(n.useEffect)((function(){var e=v.filter((function(e){return new RegExp(F,"i").test(new RegExp(e.name,"i"))}));b(e)}),[F,v,T]),Object(n.useEffect)((function(){p(F)}),[F]);var R=Object(n.useState)({column:"name",sort:"ASC"}),I=Object(i.a)(R,2),X=I[0],z=I[1],G=Object(n.useState)(!1),H=Object(i.a)(G,2),K=H[0],M=H[1];Object(n.useEffect)((function(){O(X),M(!1)}),[K]);var Q={handlerChangeName:function(e){var t=e.target.value;N(t)},saveOrderFilter:function(e){var t=e.target,a=t.name,n=t.value;z((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(o.a)({},a,n))}))},startOrder:function(){M(!0)},filterName:F};return r.a.createElement("div",null,l?r.a.createElement("h3",null,"carregando..."):r.a.createElement("section",null,r.a.createElement(E,{filters:Q}),r.a.createElement("div",{className:"filter-section"},r.a.createElement("div",{className:"filter-numeric-section"},r.a.createElement("label",{htmlFor:"column-filter"},"Filter by:",r.a.createElement("select",{name:"column","data-testid":"column-filter",onChange:function(e){return L(e)}},x.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("select",{name:"comparison","data-testid":"comparison-filter",onChange:function(e){return L(e)}},r.a.createElement("option",{value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a")),r.a.createElement("input",{type:"number","data-testid":"value-filter",name:"value",onChange:function(e){return L(e)}}),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:function(){return q()}},"Filtrar")),J()),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement(s,null)),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement(f,{key:t,planet:e})}))))))}function b(e,t){var a=t.order,n=a.column,r=a.sort;return e.sort((function(e,t){var a,l;"name"===n?(a=e[n].toLowerCase(),l=t[n].toLowerCase()):(a=parseFloat(e[n]),l=parseFloat(t[n]));var c=0;return a>l?c=1:a<l&&(c=-1),"ASC"===r?c:-1*c}))}function h(e){var t=e.children,a=Object(n.useState)([]),l=Object(i.a)(a,2),c=l[0],o=l[1],u=Object(n.useState)([]),s=Object(i.a)(u,2),f=s[0],d=s[1],p=Object(n.useState)(!1),E=Object(i.a)(p,2),v=E[0],h=E[1],O=Object(n.useState)({filterByName:{name:""},filterByNumericValues:[],order:{column:"name",sort:"ASC"}}),j=Object(i.a)(O,2),g=j[0],y=j[1];function F(e){var t=b(e,g);d(t)}var N={planets:f,savePlanets:function(e){var t=b(e,g);o(t),h(!1)},isLoading:v,changeLoading:function(){h(!0)},filters:g,setFilters:function(e){var t=g;t.filterByName.name=e,y(t)},planetsToFilter:c,saveFilteredPlanets:F,addFilterByNumericValue:function(e){var t=g;t.filterByNumericValues.push(e),y(t)},addFilterByOrder:function(e){var t=g;t.order=e,y(t),F(f)},removeFilterByNumericValue:function(e){var t=g.filterByNumericValues.filter((function(t,a){return a!==e})),a=g;a.filterByNumericValues=t,y(a)}};return r.a.createElement("div",null,r.a.createElement(m.Provider,{value:N},t))}var O=function(){return r.a.createElement(h,null,r.a.createElement(v,null))};c.a.render(r.a.createElement(O,null),document.getElementById("root"))}],[[7,1,2]]]);
//# sourceMappingURL=main.6586e3f7.chunk.js.map